# **Задача№1 "Понимание JVM"**

## Предложенный код:

```java
public class JvmComprehension {

    public static void main(String[] args) {
        int i = 1;                      // 1
        Object o = new Object();        // 2
        Integer ii = 2;                 // 3
        printAll(o, i, ii);             // 4
        System.out.println("finished"); // 7
    }

    private static void printAll(Object o, int i, Integer ii) {
        Integer uselessVar = 700;                   // 5
        System.out.println(o.toString() + i + ii);  // 6
    }
}
```

# Решение:
1. Classloader проверяет наличие класса JvmComprehension. Если раньше не загружался, то создает его. После загрузки класса, верификации, подготовки и разрешения символьных ссылок помещает в Metaspace.
2. ```public static void main()`` - В стэке создается фрейм стека метода main().
3. ```int i = 1;``` - Внутри main выделяется память для переменной i типа int со значением 1.
4. ```Object o = new Object();``` - В heap создается экземпляр класса Object, ссылка на этот объект сохраняется в памяти фрейма main в переменной o.
5. ```Integer ii = 2;``` - Загрузчик класса добавляет класс Integer. В heap создается экземпляр класса Integer со значением 2, ссылка на этот объект сохраняется в памяти фрейма main в переменной ii.
6. ```printAll(o, i, ii);``` - вызов метода printAll(), в стэк добавляется фрейм этого метода. В нем выделяется память для переменных o, i, ii. i - хранит значение, остальные - ссылки на соответствующие объекты из кучи.
7. ```Integer uselessVar = 700;``` - В heap создается экземпляр класса Integer со значением 700, ссылка на этот объект сохраняется в памяти фрейма printAll в переменной uselessVar.
8. ```System.out.println(o.toString() + i + ii);``` - Добавление в стэк метода o.toString(). Результат соединяется со значениями переменных i и ii, затем добавляется в пулл строк кучи. Удаление из стэка o.toString(). Добавление в стэк метода System.out.println(). В качестве параметра ссылка на созданную строку из кучи.
9. Сборщик мусора, освобождение из памяти строки из предыдущего пункта.
10. После выполнения метод System.out.println() удаляется из стэка.
11. Удаление из стэка printAll().
12. Сборщик мусора удаляет из кучи Integer со значением 700.
13. ```System.out.println("finished");``` - В пулле строк поиск и создание строки "finished". Добавление в стэк фрейма System.out.println() со ссылкой на созданную строку в качестве параметра. 
14. Сборщик мусора, освобождение из памяти строки из предыдущего пункта.
15. Завершение метода System.out.println() и удаление его из стэка.
16. Завершение метода main() и удаление его из стэка.
17. Освобождение памяти сборщиком мусора.